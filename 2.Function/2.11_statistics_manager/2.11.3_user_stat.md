### 2.11.3 用户状态统计
用户状态统计是在处理查询结果时进行的。要进行此类统计必须开启useSqlStat(参见[1.3 server.xml](../../1.config_file/1.3_server.xml.md))。

#### 2.11.3.1  统计内容
用户状态统计如下内容：

1. 每个用户的最大并发
2. 每个用户的前N条最慢SQL的sql语句，语句执行的开始时间。N通过sqlRecordCount进行设置(参见[1.3 server.xml](../../1.config_file/1.3_server.xml.md))，默认值为10。慢SQL的标准为执行时间大于等于T的sql语句。  
通过命令:   
**reload @@sqlslow=t;**   
进行设置。t为整数，单位为毫秒。  
3. 网络读写字节数
4. 每用户最后执行的50条语句
5. 每用户结果集大于10000行的前10条select语句
6. 每用户频度最大的前1024条sql
7. 每用户结果集大小（单位：字节）大于M的sql语句。M通过maxResultSet进行设置(参见[1.3 server.xml](../../1.config_file/1.3_server.xml.md))。

#### 2.11.3.2  用户状态统计服务的命令

+ show @@sql;
+ show @@sql.high;
+ show @@sql.large;
+ show @@sql.resultset;
+ show @@sql.slow;
+ show @@sql.sum.user;  

以上命令的使用请参看2.1 管理端命令集。

#### 2.11.3.3  用户状态统计重置  
要清空用户状态统计结果而重新进行统计，执行如下命令:
```
reload @@user_stat;
```  





